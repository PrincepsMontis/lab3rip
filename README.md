# ЛР3 — Профилирование и оптимизация (на основе ЛР2)
**Вариант 9 — Генерация UUID (неоптимальный путь)**

## Идея и архитектура
- **Service A** → отправляет запрос на генерацию UUID (WebClient, Mono/Flux).
- **Service B** → генерирует UUID (намеренно неэффективно в baseline-версии).

## Цель работы
Научиться выявлять и устранять узкие места в Java-приложениях с помощью современных профилировщиков и оптимизировать серверный микросервис **Service B** из ЛР2, который был реализован «неэффективно».

## Инструменты профилирования
- Java Flight Recorder (JFR)
- Java Mission Control (JMC)
- VisualVM
- Async Profiler
- (опционально) IntelliJ Profiler

## Hot spots (ожидаемые узкие места)
- Создание `SecureRandom` на каждый запрос.
- Использование `String.format(...)` и создание лишних временных объектов.
- Лишние преобразования (например, многократные encode/decode) и рефлексия.

## План выполнения (до/после)
1. Запустить **Service B** в режиме, удобном для профилирования.
2. Под нагрузкой собрать профили:
   - CPU hot spots
   - Allocation hot spots (аллокации/GC pressure)
3. Описать найденные проблемы (что именно горячее и почему).
4. Оптимизировать код:
   - реиспользовать генератор (`SecureRandom` как singleton/поле)
   - убрать `String.format`, заменить на `StringBuilder`
   - убрать/сократить лишние преобразования и промежуточные строки
5. Повторно провести профилирование.
6. Сравнить результаты «до/после» (CPU/alloc, время ответа).

## Запуск сервисов
### Service B (сервер)

```bash
cd service-a-client
./mvnw spring-boot:run
```

### Service A (клиент, если требуется)

```bash
cd service-a-client
./mvnw spring-boot:run
```

## Проверка эндпоинтов Service B

```bash
curl http://localhost:8081/api/uuid/single
curl http://localhost:8081/api/uuid/batch?count=10
```


## Ожидаемый результат
- В baseline (неоптимальной версии) профилировщики показывают значимые CPU/alloc hot spots в местах:
  - `new SecureRandom()`
  - `String.format(...)`
  - лишних преобразований/конкатенаций
- После оптимизации снижаются:
  - число аллокаций (alloc hot spots)
  - доля CPU времени в “горячих” методах
  - задержка ответа на запросы
